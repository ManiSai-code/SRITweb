<!DOCTYPE html>
<html>
<head>
<title>Assign Classes</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-dark text-white p-4">

<h3>Assign Class</h3>

<input id="className" class="form-control mb-2" placeholder="Class Name">

<select id="facultySelect" class="form-control mb-2"></select>
<select id="studentSelect" class="form-control mb-2"></select>

<button class="btn btn-success" onclick="assign()">Assign</button>
<button class="btn btn-secondary" onclick="back()">Back</button>

<script>
const users = JSON.parse(localStorage.getItem("users")) || [];

function load(){
  facultySelect.innerHTML="";
  studentSelect.innerHTML="";
  users.filter(u=>u.role==="faculty").forEach(f=>{
    facultySelect.innerHTML+=`<option>${f.username}</option>`;
  });
  users.filter(u=>u.role==="student").forEach(s=>{
    studentSelect.innerHTML+=`<option>${s.username}</option>`;
  });
}
load();

function assign(){
  const cname=className.value;
  const fac=facultySelect.value;
  const stu=studentSelect.value;

  users.forEach(u=>{
    if(u.username===fac||u.username===stu){
      u.classes = u.classes || [];
      u.classes.push(cname);
    }
  });

  localStorage.setItem("users",JSON.stringify(users));
  alert("Class Assigned Successfully!");
}

function back(){
  window.location.href="admin.html";
}
</script>

</body>
</html>
